/*!
 * fastshell
 * Fiercely quick and opinionated front-ends
 * https://HosseinKarami.github.io/fastshell
 * @author Marcus Martini
 * @version 1.0.3
 * Copyright 2016. MIT licensed.
 */
!function(e,t,o){"use strict";function n(t){var o=t.coords.latitude+","+t.coords.longitude,n="http://maps.googleapis.com/maps/api/geocode/json?latlng="+o+"&sensor=true";e.getJSON(n,function(t){var o=t.results[0].address_components[0].long_name,n=t.results[0].address_components[1].short_name,a=t.results[0].address_components[2].long_name,i=t.results[0].address_components[3].long_name,s=t.results[0].address_components[5].short_name,l=t.results[0].address_components[7].long_name;e(".busca-cep").closest("form-line").removeClass("loading"),e(".cep").val(l),e(".busca-cep").val(n+", "+o+", "+a+" - "+i+"/"+s),e(".endereco").val(n+", "+a+" - "+i+"/"+s)})}function a(){var t=[];e.getJSON("http://foxxnet.asystem.com.br/integracao_site.php?lista_unidades",function(t){e.each(t[1],function(t,o){null!==o.nome_unidade&&(e(".unidade").parent(".form-line").removeClass("loading"),e(".unidade select").append('<option value="'+o.unidade+'">'+o.nome_unidade+"</option>"))})}),e(".main").on("change",".unidade select",function(){var o=e(this).val();e(".melhor-dia select, .melhor-hora select").children("option").remove(),e(".melhor-dia").parent(".form-line").addClass("loading"),e.getJSON("http://foxxnet.asystem.com.br/integracao_site.php?agenda",function(n){e(".melhor-dia").parent(".form-line").removeClass("loading"),e(".melhor-dia select").html("<option>__/__/____</option>"),e.each(n[1],function(n,a){a.sigla_unidade===o&&e.each(a.horarios,function(o,n){var a=o.split("-").reverse().join("/");e(".melhor-dia select").append('<option value="'+a+'">'+a+"</option>"),t[a]=n})})})}),e(".main").on("change",".melhor-dia select",function(){var o=e(this).val();e(".melhor-hora select").children("option").remove(),e(".melhor-hora select").html("<option>--:--</option>"),e.each(t[o],function(t,o){var n=o.split(":"),a=n[0]+":"+n[1];e(".melhor-hora select").append('<option value="'+a+'">'+a+"</option>")})}),e(".unidade").parent(".form-line").addClass("loading")}function i(t){e(".s-box__link--open").removeClass("s-box__link--open"),t.addClass("s-box__link--open")}function s(t){var o=t.find(".marker"),n={zoom:16,center:new google.maps.LatLng(0,0),mapTypeId:google.maps.MapTypeId.ROADMAP},a=new google.maps.Map(t[0],n);return a.markers=[],o.each(function(){l(e(this),a)}),c(a),a}function l(e,o){var n=new google.maps.LatLng(e.data("lat"),e.data("lng")),a=new google.maps.Marker({position:n,map:o,url:"waze://?ll="+e.data("lat")+","+e.data("lng")});o.markers.push(a),google.maps.event.addListener(a,"click",function(){t.location.href=this.url})}function c(t){var o=new google.maps.LatLngBounds;e.each(t.markers,function(e,t){var n=new google.maps.LatLng(t.position.lat(),t.position.lng());o.extend(n)}),1===t.markers.length?(t.setCenter(o.getCenter()),t.setZoom(16)):t.fitBounds(o)}function r(e,t,o){var n=new google.maps.DirectionsService,a=new google.maps.DirectionsRenderer,i=new google.maps.Map(e[0],{zoom:7,center:{lat:o.lat,lng:o.lng}});a.setMap(i),n.route({origin:t,destination:o.lat+","+o.lng,travelMode:google.maps.TravelMode.DRIVING},function(e,t){t===google.maps.DirectionsStatus.OK?a.setDirections(e):console.log("Directions request failed due to "+t)})}function d(t,n,a){if(t.length){var i=e.isArray(n)?n.join(" "):n;e(o).on("click",function(e){t.is(e.target)||0!==t.has(e.target).length||t.removeClass(i)}),e.isFunction(a)&&a()}}function m(){e(".data-nascimento").mask("99/99/9999"),e(".cpf").mask("999.999.999-99"),e(".cnpj").mask("99.999.999/9999-99"),e(".cep").mask("99999-999"),e(".busca-cep").unmask(),e(".telefone").on("focusout",function(){var t=e(this).val().replace(/\D/g,""),o=t.length>10?"99 99999.999?9":"99 9999.9999?9";e(this).unmask().mask(o)}).trigger("focusout")}function p(t){var o=t.next(e(".coursebox__content")),n=t.val().split("://"),a="https"===n[0]?"http://"+n[1]:n.join("://");o.html("").load(a+" .ajax-content",null,function(){o.removeClass("loading")})}function u(o,n,a){var i=e(".infobox__content",o),l=o.parent(".infobox-grid"),c=t.matchMedia("(max-width: 768px)").matches,r=function(){return e("body").hasClass("home")?c?e.scrollTo(l,800,{axis:"y"}):e(".content .ajax-content").scrollTo(l,800):c?e.scrollTo(l,800,{axis:"y"}):e(".content").scrollTo(l,800)},d=n.split("://");n="https"===d[0]?"http://"+d[1]:d.join("://"),e(".ajax-content",o).length?l.hasClass("infobox--open")||setTimeout(function(){r()},800):i.html("").load(n+" .ajax-content",null,function(){l.removeClass("loading"),e.isFunction(a)?a():e(".acf-map",i).length&&s(e(".acf-map",o)),setTimeout(function(){i.fadeIn(800),r()},800)}),e(".infobox-grid").removeClass("infobox--open"),l.addClass("infobox--open")}function f(){e(".form-busca-cep").on("click",".busca-cep-btn",function(t){var o=e(".busca-cep").val(),n=[];e.getJSON("wp-content/themes/cellep/unidades-json.php",function(t){e.each(t,function(e,t){n.push(t.lat+","+t.lng)});var a=new google.maps.DistanceMatrixService;a.getDistanceMatrix({origins:[o],destinations:n,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC},function(n,a){if(a!==google.maps.DistanceMatrixStatus.OK)console.log("Error was: "+a);else{var i=99999999,s=null;for(var l in t){var c=n.rows[0].elements;c[l].distance.value<i&&(i=c[l].distance.value,s=t[l])}var d=s.link,m=d.split("/unidades/")[1].slice(0,-1),p=e(".infobox--"+m);u(p,d,function(){r(e(".acf-map",p),o,s)})}})}),t.preventDefault()})}function h(t,o){if(""!==e.trim(o)){var n=t.closest("form");t.closest(".form-line").addClass("loading"),e.getJSON("http://cep.republicavirtual.com.br/web_cep.php?formato=json&cep="+o,function(o){if("0"!==o.resultado){var a=o.tipo_logradouro+" "+o.logradouro+", "+o.bairro+" - "+o.cidade+"/"+o.uf;t.closest(".form-line").removeClass("loading"),e(".endereco",n).val(a)}})}}function g(e){e.find("input:text, input:password, input:file, select, textarea").val(""),e.find("input:radio, input:checkbox").removeAttr("checked").removeAttr("selected")}e(".main").on("click",".s-box__link--open",function(t){if(location.hash===e(this).attr("href")){var o=e(this).closest(".box__header").next(".content").find(".ajax-content");o.scrollTo(0,800),t.preventDefault(t)}}),e("body").show(),e(".content").on("click",".infobox",function(t){e(this).parent(".infobox-grid").hasClass("infobox--open")||(u(e(this),e(this).data("url")),t.preventDefault())}),e(".main").on("click",".timeline__item, .has-tooltip",function(o){var n=e("<span>"),a=e(this).attr("href").split("://"),i="https"===a[0]?"http://"+a[1]:a.join("://"),s=e(this),l=e(this);e(".tooltip").removeClass("s-tooltip--open"),e(".timeline__item").removeClass("s-timeline__item--active"),e(this).hasClass("timeline__item")&&(e(this).addClass("s-timeline__item--active"),l=e(this).parent());var c=t.matchMedia("(max-width: 768px)").matches;e(this).addClass("loading"),l.prepend(n.addClass("tooltip corte").html("").load(i+" .ajax-content",function(){if(s.removeClass("loading"),e(".tooltip",l).addClass("s-tooltip--open"),d(e(".tooltip, .timeline__item, .has-tooltip"),["s-timeline__item--active","s-tooltip--open"],function(){e(".timeline--first-date").attr("style","")}),e(this).closest(".timeline__wrapper").hasClass("timeline--first-date")){var t=e(this).height()+20;e(this).closest(".timeline__wrapper").css("margin-top",t)}else e(".timeline--first-date").attr("style","");setTimeout(function(){c?e.scrollTo(e(".s-tooltip--open"),800,{axis:"y"}):e(".timeline").scrollTo(e(".s-tooltip--open"),800)},800)})),o.preventDefault()});var _=null;e(".acf-map").each(function(){_=s(e(this))}),e(".box__link").on("click",function(){t.matchMedia("(max-width: 768px)").matches&&setTimeout(function(){e.scrollTo(e(".boxes"),800,{axis:"y"})},800)}),e(".click-to-call").on("click",function(t){e(".click-to-call__form").toggleClass("s-clicktocall__form--open"),t.preventDefault()}),e("#header").on("click",".close-camp__form",function(t){e(".click-to-call-camp__form").removeClass("s-clicktocall-camp__form--open"),t.preventDefault()}),d(e(".click-to-call, .click-to-call__form"),"s-clicktocall__form--open"),d(e(".click-to-call-camp, .click-to-call-camp__form"),"s-clicktocall-camp__form--open"),m(),e(".click-to-call-camp__form").toggleClass("s-clicktocall-camp__form--open"),e("body").hasClass("home")&&e(".slider").slick({dots:!0,infinite:!0,autoplay:!0,speed:800,slidesToShow:1}),e("body").hasClass("home")&&(e(t).hashchange(function(){var t=location.hash,o=t.split("/"),n=t.split("/");n.length>1?n.splice(0,1):n[0]=t.substr(1);var s=n.length>1?n.join("/"):n[0],l=e(o.length>1?".box--"+o[0].substr(1):".box--"+s),c=s;e(".main").attr("class","main s-"+s),"#institucional"===o[0]?(e(".main").addClass("s-institucional"),e(".box__title",l).html("").addClass("loading").load(c+" .ajax-title",function(){var o=e(".ajax-title",this).html();e(".ajax-title",this).remove(),e(this).removeClass("loading").append(o),e(".box__link",l).attr("href",t),i(e(".box__link",l))})):e(".main").removeClass("s-institucional"),"#agende-sua-visita"===o[0]?(e(".main").addClass("s-agende-sua-visita"),e(".box__title",l).html("").addClass("loading").load(c+" .ajax-title",function(){var o=e(".ajax-title",this).html();e(".ajax-title",this).remove(),e(this).removeClass("loading").append(o),e(".box__link",l).attr("href",t),i(e(".box__link",l))})):e(".main").removeClass("s-agende-sua-visita"),!e(".ajax-content",l).length||o.length>0?("#institucional"===o[0]&&e(".content",l).addClass("loading").html(""),e(".content",l).load(c+" .ajax-content",function(){e(this).removeClass("loading"),e(".wpcf7-form").length&&e(".wpcf7-form").wpcf7InitForm(),m(),"#agende-sua-visita"===o[0]&&a(),"unidades"===c&&f(),e(".coursebox__select",e(this)).length&&(e(".main").on("change",".coursebox__select",function(){p(e(this))}),e(".coursebox__select",e(this)).each(function(){p(e(this))})),e.scrollTo(l,800),i(e(".box__link",l))})):(e.scrollTo(l,800),i(e(".box__link",l)))}),e(t).hashchange()),e(".box__anchor").on("click",function(t){var o=e(this).attr("href").split("#").join(""),n=e(this).closest(".box"),a=e(".ajax-content",n),i=e("#part--"+o,a);a.scrollTo(i,800),t.preventDefault()}),e(".add-field").click(function(t){e(".lista").append('<div><input type="text" name="item" size="60" /></div>'),t.preventDefault()}),e(".main").on("click",".open-login",function(o){e(".form__register").append('<div class="register"></div>').load("login-2 .ajax-content",function(){var o=t.location.href;e(".form__register").toggleClass("s-register__form--open"),e(".form-login").attr("action",o).append('<input name="redirect_to" type="hidden" value="'+o+'" />')}),o.preventDefault()}),e("#header").on("click",".open-login",function(t){e(".form__register").append('<div class="register"></div>').addClass("loading").load("login-2 .ajax-content",function(){e(this).removeClass("loading")}),t.preventDefault()}),e("#header").on("click",".open-register",function(t){e(".form__register").append('<div class="register"></div>').addClass("loading").load("cadastro .ajax-content",function(){e(this).removeClass("loading"),m()}),m(),t.preventDefault()}),e("#header").on("click",".close__form",function(t){e(".form__register").toggleClass("s-register__form--open"),t.preventDefault()}),d(e(".form__register, .open-login"),"s-register__form--open"),e("body").on("blur",".cep",function(){h(e(this),e(this).val())}),navigator.geolocation||e(".btn-location").remove(),e(".main").on("click",".btn-location",function(t){e(".busca-cep").closest("form-line").addClass("loading"),navigator.geolocation&&navigator.geolocation.getCurrentPosition(n),t.preventDefault()});var v=1;e(".main").on("click",".add-field",function(t){var o=e(this).closest("form"),n=v-1,a=e('.input-fields[data-pos="'+n+'"]',o),i=a.clone(!0);g(i),i.insertAfter(a).attr("data-pos",v),i.prepend('<a href="#" class="close__form remove-fields">x</a>'),v++,e("legend",i).html("Filho "+v),e(".data-nascimento",i).attr("name","data-nascimento"+v).attr("id","data-nascimento"+v),e(".idioma",i).attr("name","idioma"+v).attr("id","idioma"+v),e(".contato-outro-idioma",i).attr("name","contato-outro-idioma"+v).attr("id","contato-outro-idioma"+v),e(".qual-escola",i).attr("name","qual-escola"+v).attr("id","qual-escola"+v),e(".quanto-tempo",i).attr("name","quanto-tempo"+v).attr("id","quanto-tempo"+v),e(".nome-colegio",i).attr("name","nome-colegio"+v).attr("id","nome-colegio"+v),e(".periodo-estudo",i).attr("name","periodo-estudo"+v).attr("id","periodo-estudo"+v),m(),t.preventDefault()}),e(".main").on("click",".remove-fields",function(t){e(this).parent(".input-fields").remove(),v--,t.preventDefault()}),e(o).on("submit.wpcf7",function(){setTimeout(function(){e(".ajax-content").scrollTo(".wpcf7-response-output",800)},800)})}(jQuery,window,document);