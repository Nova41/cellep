/*!
 * fastshell
 * Fiercely quick and opinionated front-ends
 * https://HosseinKarami.github.io/fastshell
 * @author Marcus Martini
 * @version 1.0.3
 * Copyright 2016. MIT licensed.
 */
!function(e,o,t){"use strict";function n(o){var t=o.coords.latitude+","+o.coords.longitude,n="http://maps.googleapis.com/maps/api/geocode/json?latlng="+t+"&sensor=true";e.getJSON(n,function(o){var t=o.results[0].address_components[0].long_name,n=o.results[0].address_components[1].short_name,a=o.results[0].address_components[2].long_name,i=o.results[0].address_components[3].long_name,s=o.results[0].address_components[5].short_name,l=o.results[0].address_components[7].long_name;e(".busca-cep").closest("form-line").removeClass("loading"),e(".cep").val(l),e(".busca-cep").val(n+", "+t+", "+a+" - "+i+"/"+s),e(".endereco").val(n+", "+a+" - "+i+"/"+s)})}function a(){var o=[];e.getJSON("http://foxxnet.asystem.com.br/integracao_site.php?lista_unidades",function(o){e.each(o[1],function(o,t){null!==t.nome_unidade&&(e(".unidade").parent(".form-line").removeClass("loading"),e(".unidade select").append('<option value="'+t.unidade+'">'+t.nome_unidade+"</option>"))})}),e(".main").on("change",".unidade select",function(){var t=e(this).val();e(".melhor-dia select, .melhor-hora select").children("option").remove(),e(".melhor-dia").parent(".form-line").addClass("loading"),e.getJSON("http://foxxnet.asystem.com.br/integracao_site.php?agenda",function(n){e(".melhor-dia").parent(".form-line").removeClass("loading"),e(".melhor-dia select").html("<option>__/__/____</option>"),e.each(n[1],function(n,a){a.sigla_unidade===t&&e.each(a.horarios,function(t,n){var a=t.split("-").reverse().join("/");e(".melhor-dia select").append('<option value="'+a+'">'+a+"</option>"),o[a]=n})})})}),e(".main").on("change",".melhor-dia select",function(){var t=e(this).val();e(".melhor-hora select").children("option").remove(),e(".melhor-hora select").html("<option>--:--</option>"),e.each(o[t],function(o,t){var n=t.split(":"),a=n[0]+":"+n[1];e(".melhor-hora select").append('<option value="'+a+'">'+a+"</option>")})}),e(".unidade").parent(".form-line").addClass("loading")}function i(o){e(".s-box__link--open").removeClass("s-box__link--open"),o.addClass("s-box__link--open")}function s(o){var t=o.find(".marker"),n={zoom:16,center:new google.maps.LatLng(0,0),mapTypeId:google.maps.MapTypeId.ROADMAP},a=new google.maps.Map(o[0],n);return a.markers=[],t.each(function(){l(e(this),a)}),c(a),a}function l(e,t){var n=new google.maps.LatLng(e.data("lat"),e.data("lng")),a=new google.maps.Marker({position:n,map:t,url:"waze://?ll="+e.data("lat")+","+e.data("lng")});t.markers.push(a),google.maps.event.addListener(a,"click",function(){o.location.href=this.url})}function c(o){var t=new google.maps.LatLngBounds;e.each(o.markers,function(e,o){var n=new google.maps.LatLng(o.position.lat(),o.position.lng());t.extend(n)}),1===o.markers.length?(o.setCenter(t.getCenter()),o.setZoom(16)):o.fitBounds(t)}function r(e,o,t){var n=new google.maps.DirectionsService,a=new google.maps.DirectionsRenderer,i=new google.maps.Map(e[0],{zoom:7,center:{lat:t.lat,lng:t.lng}});a.setMap(i),n.route({origin:o,destination:t.lat+","+t.lng,travelMode:google.maps.TravelMode.DRIVING},function(e,o){o===google.maps.DirectionsStatus.OK?a.setDirections(e):console.log("Directions request failed due to "+o)})}function d(o,n,a){if(o.length){var i=e.isArray(n)?n.join(" "):n;e(t).on("click",function(e){o.is(e.target)||0!==o.has(e.target).length||o.removeClass(i)}),e.isFunction(a)&&a()}}function m(){e(".data-nascimento").mask("99/99/9999"),e(".cpf").mask("999.999.999-99"),e(".cnpj").mask("99.999.999/9999-99"),e(".cep").mask("99999-999"),e(".busca-cep").unmask(),e(".telefone").on("focusout",function(){var o=e(this).val().replace(/\D/g,""),t=o.length>10?"99 99999.999?9":"99 9999.9999?9";e(this).unmask().mask(t)}).trigger("focusout")}function p(o){var t=o.next(e(".coursebox__content")),n=o.val().split("://"),a="https"===n[0]?"http://"+n[1]:n.join("://");t.html("").load(a+" .ajax-content",null,function(){t.removeClass("loading")})}function u(t,n,a){var i=e(".infobox__content",t),l=t.parent(".infobox-grid"),c=o.matchMedia("(max-width: 768px)").matches,r=function(){return e("body").hasClass("home")?c?e.scrollTo(l,800,{axis:"y"}):e(".content .ajax-content").scrollTo(l,800):c?e.scrollTo(l,800,{axis:"y"}):e(".content").scrollTo(l,800)},d=n.split("://");n="https"===d[0]?"http://"+d[1]:d.join("://"),e(".ajax-content",t).length?l.hasClass("infobox--open")||setTimeout(function(){r()},800):i.html("").load(n+" .ajax-content",null,function(){l.removeClass("loading"),e.isFunction(a)?a():e(".acf-map",i).length&&s(e(".acf-map",t)),setTimeout(function(){i.fadeIn(800),r()},800)}),e(".infobox-grid").removeClass("infobox--open"),l.addClass("infobox--open")}function f(){e(".form-busca-cep").on("click",".busca-cep-btn",function(o){var t=e(".busca-cep").val(),n=[];e.getJSON("wp-content/themes/cellep/unidades-json.php",function(o){e.each(o,function(e,o){n.push(o.lat+","+o.lng)});var a=new google.maps.DistanceMatrixService;a.getDistanceMatrix({origins:[t],destinations:n,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC},function(n,a){if(a!==google.maps.DistanceMatrixStatus.OK)console.log("Error was: "+a);else{var i=99999999,s=null;for(var l in o){var c=n.rows[0].elements;c[l].distance.value<i&&(i=c[l].distance.value,s=o[l])}var d=s.link,m=d.split("/unidades/")[1].slice(0,-1),p=e(".infobox--"+m);u(p,d,function(){r(e(".acf-map",p),t,s)})}})}),o.preventDefault()})}function h(o,t){if(""!==e.trim(t)){var n=o.closest("form");o.closest(".form-line").addClass("loading"),e.getJSON("http://cep.republicavirtual.com.br/web_cep.php?formato=json&cep="+t,function(t){if("0"!==t.resultado){var a=t.tipo_logradouro+" "+t.logradouro+", "+t.bairro+" - "+t.cidade+"/"+t.uf;o.closest(".form-line").removeClass("loading"),e(".endereco",n).val(a)}})}}function g(e){e.find("input:text, input:password, input:file, select, textarea").val(""),e.find("input:radio, input:checkbox").removeAttr("checked").removeAttr("selected")}e(".main").on("click",".s-box__link--open",function(o){if(location.hash===e(this).attr("href")){var t=e(this).closest(".box__header").next(".content").find(".ajax-content");t.scrollTo(0,800),o.preventDefault(o)}}),e("body").show(),e(".content").on("click",".infobox",function(o){e(this).parent(".infobox-grid").hasClass("infobox--open")||(u(e(this),e(this).data("url")),o.preventDefault())}),e(".main").on("click",".timeline__item, .has-tooltip",function(t){var n=e("<span>"),a=e(this).attr("href").split("://"),i="https"===a[0]?"http://"+a[1]:a.join("://"),s=e(this),l=e(this);e(".tooltip").removeClass("s-tooltip--open"),e(".timeline__item").removeClass("s-timeline__item--active"),e(this).hasClass("timeline__item")&&(e(this).addClass("s-timeline__item--active"),l=e(this).parent());var c=o.matchMedia("(max-width: 768px)").matches;e(this).addClass("loading"),l.prepend(n.addClass("tooltip corte").html("").load(i+" .ajax-content",function(){if(s.removeClass("loading"),e(".tooltip",l).addClass("s-tooltip--open"),d(e(".tooltip, .timeline__item, .has-tooltip"),["s-timeline__item--active","s-tooltip--open"],function(){e(".timeline--first-date").attr("style","")}),e(this).closest(".timeline__wrapper").hasClass("timeline--first-date")){var o=e(this).height()+20;e(this).closest(".timeline__wrapper").css("margin-top",o)}else e(".timeline--first-date").attr("style","");setTimeout(function(){c?e.scrollTo(e(".s-tooltip--open"),800,{axis:"y"}):e(".timeline").scrollTo(e(".s-tooltip--open"),800)},800)})),t.preventDefault()});var _=null;e(".acf-map").each(function(){_=s(e(this))}),e(".box__link").on("click",function(){o.matchMedia("(max-width: 768px)").matches&&setTimeout(function(){e.scrollTo(e(".boxes"),800,{axis:"y"})},800)}),e(".click-to-call").on("click",function(o){e(".click-to-call__form").toggleClass("s-clicktocall__form--open"),o.preventDefault()}),e("#header").on("click",".close-camp__form",function(o){e(".click-to-call-camp__form").removeClass("s-clicktocall-camp__form--open"),o.preventDefault()}),d(e(".click-to-call, .click-to-call__form"),"s-clicktocall__form--open"),d(e(".click-to-call-camp, .click-to-call-camp__form"),"s-clicktocall-camp__form--open"),m(),e(".click-to-call-camp__form").toggleClass("s-clicktocall-camp__form--open"),e("body").hasClass("home")&&e(".slider").slick({dots:!0,infinite:!0,autoplay:!0,speed:800,slidesToShow:1}),e("body").hasClass("home")&&(e(o).hashchange(function(){var o=location.hash,t=o.split("/"),n=o.split("/");n.length>1?n.splice(0,1):n[0]=o.substr(1);var s=n.length>1?n.join("/"):n[0],l=e(t.length>1?".box--"+t[0].substr(1):".box--"+s),c=s;e(".main").attr("class","main s-"+s),"#institucional"===t[0]?(e(".main").addClass("s-institucional"),e(".box__title",l).html("").addClass("loading").load(c+" .ajax-title",function(){var t=e(".ajax-title",this).html();e(".ajax-title",this).remove(),e(this).removeClass("loading").append(t),e(".box__link",l).attr("href",o),i(e(".box__link",l))})):e(".main").removeClass("s-institucional"),"#agende-sua-visita"===t[0]?(e(".main").addClass("s-agende-sua-visita"),e(".box__title",l).html("").addClass("loading").load(c+" .ajax-title",function(){var t=e(".ajax-title",this).html();e(".ajax-title",this).remove(),e(this).removeClass("loading").append(t),e(".box__link",l).attr("href",o),i(e(".box__link",l))})):e(".main").removeClass("s-agende-sua-visita"),!e(".ajax-content",l).length||t.length>0?("#institucional"===t[0]&&e(".content",l).addClass("loading").html(""),e(".content",l).load(c+" .ajax-content",function(){e(this).removeClass("loading"),e(".wpcf7-form").length&&e(".wpcf7-form").wpcf7InitForm(),m(),"#agende-sua-visita"===t[0]&&a(),"unidades"===c&&f(),e(".coursebox__select",e(this)).length&&(e(".main").on("change",".coursebox__select",function(){p(e(this))}),e(".coursebox__select",e(this)).each(function(){p(e(this))})),e.scrollTo(l,800),i(e(".box__link",l))})):(e.scrollTo(l,800),i(e(".box__link",l)))}),e(o).hashchange()),e(".box__anchor").on("click",function(o){var t=e(this).attr("href").split("#").join(""),n=e(this).closest(".box"),a=e(".ajax-content",n),i=e("#part--"+t,a);a.scrollTo(i,800),o.preventDefault()}),e(".add-field").click(function(o){e(".lista").append('<div><input type="text" name="item" size="60" /></div>'),o.preventDefault()}),e(".main").on("click",".open-login",function(t){e(".form__register").append('<div class="register"></div>').load("login-2 .ajax-content",function(){var t=o.location.href;e(".form__register").toggleClass("s-register__form--open"),e(".form-login").attr("action",t).append('<input name="redirect_to" type="hidden" value="'+t+'" />')}),t.preventDefault()}),e("#header").on("click",".open-login",function(o){e(".form__register").append('<div class="register"></div>').addClass("loading").load("login-2 .ajax-content",function(){e(this).removeClass("loading")}),o.preventDefault()}),e("#header").on("click",".open-register",function(o){e(".form__register").append('<div class="register"></div>').addClass("loading").load("cadastro .ajax-content",function(){e(this).removeClass("loading"),m()}),m(),o.preventDefault()}),e("#header").on("click",".close__form",function(o){e(".form__register").toggleClass("s-register__form--open"),o.preventDefault()}),d(e(".form__register, .open-login"),"s-register__form--open"),e("body").on("blur",".cep",function(){h(e(this),e(this).val())}),navigator.geolocation||e(".btn-location").remove(),e(".main").on("click",".btn-location",function(o){e(".busca-cep").closest("form-line").addClass("loading"),navigator.geolocation&&navigator.geolocation.getCurrentPosition(n),o.preventDefault()});var v=1;e(".main").on("click",".add-field",function(o){var t=e(this).closest("form"),n=v-1,a=e('.input-fields[data-pos="'+n+'"]',t),i=a.clone(!0);g(i),i.insertAfter(a).attr("data-pos",v),i.prepend('<a href="#" class="close__form remove-fields">x</a>'),v++,e("legend",i).html("Filho "+v),e(".data-nascimento",i).attr("name","data-nascimento"+v).attr("id","data-nascimento"+v),e(".idioma",i).attr("name","idioma"+v).attr("id","idioma"+v),e(".contato-outro-idioma",i).attr("name","contato-outro-idioma"+v).attr("id","contato-outro-idioma"+v),e(".qual-escola",i).attr("name","qual-escola"+v).attr("id","qual-escola"+v),e(".quanto-tempo",i).attr("name","quanto-tempo"+v).attr("id","quanto-tempo"+v),e(".nome-colegio",i).attr("name","nome-colegio"+v).attr("id","nome-colegio"+v),e(".periodo-estudo",i).attr("name","periodo-estudo"+v).attr("id","periodo-estudo"+v),m(),o.preventDefault()}),e(".main").on("click",".remove-fields",function(o){e(this).parent(".input-fields").remove(),v--,o.preventDefault()}),e(t).on("submit.wpcf7",function(){setTimeout(function(){e(".ajax-content").scrollTo(".wpcf7-response-output",800)},800)});var x=o.location.href.split("/"),b="/"+x[3]+"/";"/trabalhe-conosco/"===b?o.location.href="/#institucional/trabalhe-conosco":"/sobre-a-gente/"===b?o.location.href="/#institucional/sobre-a-gente":"/ouvidoria/"===b?o.location.href="/#institucional/ouvidoria":"/fornecedores/"===b?o.location.href="/#institucional/fornecedores":"/unidades/"===b&&(o.location.href="/#institucional/unidades")}(jQuery,window,document);